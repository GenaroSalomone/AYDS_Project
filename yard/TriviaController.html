<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: TriviaController
  
    &mdash; Documentation by YARD 0.9.34
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "TriviaController";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (T)</a> &raquo;
    
    
    <span class="title">TriviaController</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: TriviaController
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Sinatra::Base</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Sinatra::Base</li>
          
            <li class="next">TriviaController</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd>ServerConstants</dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>controllers/trivia_controller.rb</dd>
  </dl>
  
</div>








  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_translated_questions_and_answers-instance_method" title="#create_translated_questions_and_answers (instance method)">#<strong>create_translated_questions_and_answers</strong>  &#x21d2; Array&lt;Array, Array&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates translated versions of the provided questions and their answers.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#finalize_trivia_setup-instance_method" title="#finalize_trivia_setup (instance method)">#<strong>finalize_trivia_setup</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Finalizes the trivia setup by saving the trivia instance and initializing session variables.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_questions-instance_method" title="#get_questions (instance method)">#<strong>get_questions</strong>  &#x21d2; Array&lt;Question&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Retrieves a shuffled array of questions for the trivia.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_questions_count-instance_method" title="#get_questions_count (instance method)">#<strong>get_questions_count</strong>  &#x21d2; Array&lt;Integer&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Determines the count of different types of questions based on the difficulty level.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_translated_questions-instance_method" title="#get_translated_questions (instance method)">#<strong>get_translated_questions</strong>  &#x21d2; ActiveRecord::Relation&lt;Question&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Retrieves a subset of questions for translation based on the difficulty level.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_user_difficulty_trivia-instance_method" title="#get_user_difficulty_trivia (instance method)">#<strong>get_user_difficulty_trivia</strong>  &#x21d2; Array </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Retrieves the current user, the selected difficulty, and initializes a new trivia object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#post_trivia-instance_method" title="#post_trivia (instance method)">#<strong>post_trivia</strong>  &#x21d2; Redirect </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Post endpoint that handles the initiation of a standard trivia game.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#post_trivia_traduce-instance_method" title="#post_trivia_traduce (instance method)">#<strong>post_trivia_traduce</strong>  &#x21d2; Redirect </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Post endpoint that handles the initiation of a translated trivia game.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#random_questions-instance_method" title="#random_questions (instance method)">#<strong>random_questions</strong>  &#x21d2; ActiveRecord::Relation&lt;Question&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Fetches a random set of questions from the database.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#setup_standard_trivia-instance_method" title="#setup_standard_trivia (instance method)">#<strong>setup_standard_trivia</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets up standard trivia questions for the game.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#setup_translated_trivia-instance_method" title="#setup_translated_trivia (instance method)">#<strong>setup_translated_trivia</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets up translated trivia questions for the game.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#setup_trivia-instance_method" title="#setup_trivia (instance method)">#<strong>setup_trivia</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets up a trivia game with standard or translated questions based on the parameters.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#translate_to_selected_language-instance_method" title="#translate_to_selected_language (instance method)">#<strong>translate_to_selected_language</strong>(text, target_language)  &#x21d2; String<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Translates a given text to the selected language.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="create_translated_questions_and_answers-instance_method">
  
    #<strong>create_translated_questions_and_answers</strong>  &#x21d2; <tt>Array&lt;Array, Array&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates translated versions of the provided questions and their answers.</p>

<p>Iterates over a collection of questions, translating their text and associated help text. Translated questions and their corresponding answers are then created in the database.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>trivia</span>
      
      
        <span class='type'>(<tt>Trivia</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The trivia object for which questions are being translated.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>questions</span>
      
      
        <span class='type'>(<tt>Array&lt;Question&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>An array of question objects to be translated.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Array, Array&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A two-element array containing the translated questions and answers.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controllers/trivia_controller.rb', line 171</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_translated_questions_and_answers'>create_translated_questions_and_answers</span><span class='lparen'>(</span><span class='id identifier rubyid_trivia'>trivia</span><span class='comma'>,</span> <span class='id identifier rubyid_questions'>questions</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_translated_questions'>translated_questions</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_translated_answers'>translated_answers</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_questions'>questions</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_question'>question</span><span class='op'>|</span>
    <span class='id identifier rubyid_translated_question_text'>translated_question_text</span> <span class='op'>=</span> <span class='id identifier rubyid_translate_to_selected_language'>translate_to_selected_language</span><span class='lparen'>(</span><span class='id identifier rubyid_question'>question</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span><span class='comma'>,</span> <span class='id identifier rubyid_trivia'>trivia</span><span class='period'>.</span><span class='id identifier rubyid_selected_language_code'>selected_language_code</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_translated_help_text'>translated_help_text</span> <span class='op'>=</span> <span class='id identifier rubyid_translate_to_selected_language'>translate_to_selected_language</span><span class='lparen'>(</span><span class='id identifier rubyid_question'>question</span><span class='period'>.</span><span class='id identifier rubyid_help'>help</span><span class='comma'>,</span> <span class='id identifier rubyid_trivia'>trivia</span><span class='period'>.</span><span class='id identifier rubyid_selected_language_code'>selected_language_code</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_question'>question</span><span class='period'>.</span><span class='id identifier rubyid_difficulty'>difficulty</span><span class='period'>.</span><span class='id identifier rubyid_level'>level</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>beginner</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_translated_question'>translated_question</span> <span class='op'>=</span> <span class='kw'>case</span> <span class='id identifier rubyid_question'>question</span>
                          <span class='kw'>when</span> <span class='const'>Choice</span>
                            <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>question_type</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Choice</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>question</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='const'>Choice</span><span class='period'>.</span><span class='id identifier rubyid_create!'>create!</span><span class='lparen'>(</span>
                              <span class='label'>text:</span> <span class='id identifier rubyid_translated_question_text'>translated_question_text</span><span class='comma'>,</span>
                              <span class='label'>difficulty:</span> <span class='id identifier rubyid_question'>question</span><span class='period'>.</span><span class='id identifier rubyid_difficulty'>difficulty</span><span class='comma'>,</span>
                              <span class='label'>is_question_translated:</span> <span class='kw'>true</span><span class='comma'>,</span>
                              <span class='label'>help:</span> <span class='id identifier rubyid_translated_help_text'>translated_help_text</span>
                            <span class='rparen'>)</span> <span class='rbrace'>}</span>
                          <span class='kw'>when</span> <span class='const'>True_False</span>
                            <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>question_type</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>True_False</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>question</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='const'>True_False</span><span class='period'>.</span><span class='id identifier rubyid_create!'>create!</span><span class='lparen'>(</span>
                              <span class='label'>text:</span> <span class='id identifier rubyid_translated_question_text'>translated_question_text</span><span class='comma'>,</span>
                              <span class='label'>difficulty:</span> <span class='id identifier rubyid_question'>question</span><span class='period'>.</span><span class='id identifier rubyid_difficulty'>difficulty</span><span class='comma'>,</span>
                              <span class='label'>is_question_translated:</span> <span class='kw'>true</span><span class='comma'>,</span>
                              <span class='label'>help:</span> <span class='id identifier rubyid_translated_help_text'>translated_help_text</span>
                            <span class='rparen'>)</span> <span class='rbrace'>}</span>
                          <span class='kw'>end</span>
    <span class='id identifier rubyid_translated_questions'>translated_questions</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_translated_question'>translated_question</span>
    <span class='id identifier rubyid_translated_question_answers'>translated_question_answers</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_answers'>answers</span> <span class='op'>=</span> <span class='const'>Answer</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>question:</span> <span class='id identifier rubyid_question'>question</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_answers'>answers</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_answer'>answer</span><span class='op'>|</span>
      <span class='id identifier rubyid_is_an_autocomplete'>is_an_autocomplete</span> <span class='op'>=</span> <span class='id identifier rubyid_answer'>answer</span><span class='period'>.</span><span class='id identifier rubyid_question'>question</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Autocomplete</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_translated_answer_text'>translated_answer_text</span> <span class='op'>=</span> <span class='id identifier rubyid_translate_to_selected_language'>translate_to_selected_language</span><span class='lparen'>(</span><span class='id identifier rubyid_answer'>answer</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span><span class='comma'>,</span> <span class='id identifier rubyid_trivia'>trivia</span><span class='period'>.</span><span class='id identifier rubyid_selected_language_code'>selected_language_code</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_is_an_autocomplete'>is_an_autocomplete</span>
      <span class='id identifier rubyid_translated_answer'>translated_answer</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_is_an_autocomplete'>is_an_autocomplete</span>
                            <span class='const'>Answer</span><span class='period'>.</span><span class='id identifier rubyid_create!'>create!</span><span class='lparen'>(</span><span class='label'>text:</span> <span class='id identifier rubyid_translated_answer_text'>translated_answer_text</span><span class='comma'>,</span> <span class='label'>question_id:</span> <span class='id identifier rubyid_translated_question'>translated_question</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>question</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
                          <span class='kw'>else</span>
                            <span class='const'>Answer</span><span class='period'>.</span><span class='id identifier rubyid_create!'>create!</span><span class='lparen'>(</span><span class='label'>text:</span> <span class='id identifier rubyid_translated_answer_text'>translated_answer_text</span><span class='comma'>,</span> <span class='label'>question_id:</span> <span class='id identifier rubyid_translated_question'>translated_question</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>question</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>correct:</span> <span class='id identifier rubyid_answer'>answer</span><span class='period'>.</span><span class='id identifier rubyid_correct'>correct</span><span class='rparen'>)</span>
                          <span class='kw'>end</span>
      <span class='id identifier rubyid_translated_question_answers'>translated_question_answers</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_translated_answer'>translated_answer</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_translated_answers'>translated_answers</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_translated_question_answers'>translated_question_answers</span>
  <span class='kw'>end</span>
  <span class='lbracket'>[</span><span class='id identifier rubyid_translated_questions'>translated_questions</span><span class='comma'>,</span> <span class='id identifier rubyid_translated_answers'>translated_answers</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="finalize_trivia_setup-instance_method">
  
    #<strong>finalize_trivia_setup</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Finalizes the trivia setup by saving the trivia instance and initializing session variables.</p>

<p>This method is called after setting up the trivia questions. It saves the trivia instance to the database and initializes the session variables to track the trivia id and the questions answered by the user.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>trivia</span>
      
      
        <span class='type'>(<tt>Trivia</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The trivia instance that needs to be finalized and saved.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>session</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The session hash where the trivia id and answered questions are stored.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


98
99
100
101
102</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controllers/trivia_controller.rb', line 98</span>

<span class='kw'>def</span> <span class='id identifier rubyid_finalize_trivia_setup'>finalize_trivia_setup</span><span class='lparen'>(</span><span class='id identifier rubyid_trivia'>trivia</span><span class='comma'>,</span> <span class='id identifier rubyid_session'>session</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_trivia'>trivia</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span>
  <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:trivia_id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_trivia'>trivia</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
  <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:answered_questions</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_questions-instance_method">
  
    #<strong>get_questions</strong>  &#x21d2; <tt>Array&lt;Question&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Retrieves a shuffled array of questions for the trivia.</p>

<p>This method gathers a specified number of choice, true/false, and autocomplete questions based on counts provided. It then shuffles the collection of questions before returning them.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>choice_count</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The number of choice questions to retrieve.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>true_false_count</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The number of true/false questions to retrieve.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>autocomplete_count</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The number of autocomplete questions to retrieve.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>difficulty</span>
      
      
        <span class='type'>(<tt>Difficulty</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The difficulty object associated with the questions.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Question&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>An array of questions, shuffled and ready to be added to the trivia.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


136
137
138
139
140
141
142
143</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controllers/trivia_controller.rb', line 136</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_questions'>get_questions</span><span class='lparen'>(</span><span class='id identifier rubyid_choice_count'>choice_count</span><span class='comma'>,</span> <span class='id identifier rubyid_true_false_count'>true_false_count</span><span class='comma'>,</span> <span class='id identifier rubyid_autocomplete_count'>autocomplete_count</span><span class='comma'>,</span> <span class='id identifier rubyid_difficulty'>difficulty</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_choice_questions'>choice_questions</span> <span class='op'>=</span> <span class='id identifier rubyid_random_questions'>random_questions</span><span class='lparen'>(</span><span class='id identifier rubyid_choice_count'>choice_count</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Choice</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_difficulty'>difficulty</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_true_false_questions'>true_false_questions</span> <span class='op'>=</span> <span class='id identifier rubyid_random_questions'>random_questions</span><span class='lparen'>(</span><span class='id identifier rubyid_true_false_count'>true_false_count</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>True_False</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_difficulty'>difficulty</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_autocomplete_questions'>autocomplete_questions</span> <span class='op'>=</span> <span class='id identifier rubyid_random_questions'>random_questions</span><span class='lparen'>(</span><span class='id identifier rubyid_autocomplete_count'>autocomplete_count</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Autocomplete</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_difficulty'>difficulty</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_questions'>questions</span> <span class='op'>=</span> <span class='id identifier rubyid_choice_questions'>choice_questions</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span> <span class='op'>+</span> <span class='id identifier rubyid_true_false_questions'>true_false_questions</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span> <span class='op'>+</span> <span class='id identifier rubyid_autocomplete_questions'>autocomplete_questions</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>
  <span class='id identifier rubyid_shuffled_questions'>shuffled_questions</span> <span class='op'>=</span> <span class='id identifier rubyid_questions'>questions</span><span class='period'>.</span><span class='id identifier rubyid_shuffle'>shuffle</span>
  <span class='id identifier rubyid_shuffled_questions'>shuffled_questions</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_questions_count-instance_method">
  
    #<strong>get_questions_count</strong>  &#x21d2; <tt>Array&lt;Integer&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Determines the count of different types of questions based on the difficulty level.</p>

<p>This method calculates how many choice, true/false, and autocomplete questions should be included in the trivia based on the difficulty level provided. It ensures the total count adds up to 10 questions.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>difficulty_level</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The level of difficulty selected for the trivia.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Integer&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>An array containing the count of choice, true/false, and autocomplete questions.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


112
113
114
115
116
117
118
119
120
121
122
123</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controllers/trivia_controller.rb', line 112</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_questions_count'>get_questions_count</span><span class='lparen'>(</span><span class='id identifier rubyid_difficulty_level'>difficulty_level</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_difficulty_level'>difficulty_level</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>beginner</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_choice_count'>choice_count</span> <span class='op'>=</span> <span class='id identifier rubyid_rand'>rand</span><span class='lparen'>(</span><span class='int'>3</span><span class='op'>..</span><span class='int'>6</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_true_false_count'>true_false_count</span> <span class='op'>=</span> <span class='id identifier rubyid_rand'>rand</span><span class='lparen'>(</span><span class='int'>3</span><span class='op'>..</span><span class='int'>4</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_choice_count'>choice_count</span> <span class='op'>=</span> <span class='id identifier rubyid_rand'>rand</span><span class='lparen'>(</span><span class='int'>2</span><span class='op'>..</span><span class='int'>5</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_true_false_count'>true_false_count</span> <span class='op'>=</span> <span class='id identifier rubyid_rand'>rand</span><span class='lparen'>(</span><span class='int'>2</span><span class='op'>..</span><span class='int'>4</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_remaining_count'>remaining_count</span> <span class='op'>=</span> <span class='int'>10</span> <span class='op'>-</span> <span class='id identifier rubyid_choice_count'>choice_count</span> <span class='op'>-</span> <span class='id identifier rubyid_true_false_count'>true_false_count</span>
  <span class='id identifier rubyid_autocomplete_count'>autocomplete_count</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_remaining_count'>remaining_count</span><span class='comma'>,</span> <span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span>
  <span class='lbracket'>[</span><span class='id identifier rubyid_choice_count'>choice_count</span><span class='comma'>,</span> <span class='id identifier rubyid_true_false_count'>true_false_count</span><span class='comma'>,</span> <span class='id identifier rubyid_autocomplete_count'>autocomplete_count</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_translated_questions-instance_method">
  
    #<strong>get_translated_questions</strong>  &#x21d2; <tt>ActiveRecord::Relation&lt;Question&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Retrieves a subset of questions for translation based on the difficulty level.</p>

<p>This method selects a random set of questions that have not been translated yet, limited to the number needed for a trivia game.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>difficulty</span>
      
      
        <span class='type'>(<tt>Difficulty</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The difficulty level of the trivia game.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>ActiveRecord::Relation&lt;Question&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A collection of question records ready for translation.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


219
220
221
222
223
224
225</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controllers/trivia_controller.rb', line 219</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_translated_questions'>get_translated_questions</span><span class='lparen'>(</span><span class='id identifier rubyid_difficulty'>difficulty</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_difficulty'>difficulty</span><span class='period'>.</span><span class='id identifier rubyid_questions'>questions</span>
            <span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>type:</span> <span class='qwords_beg'>%w[</span><span class='tstring_content'>Choice</span><span class='words_sep'> </span><span class='tstring_content'>True_False</span><span class='tstring_end'>]</span></span><span class='rparen'>)</span>
            <span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>is_question_translated:</span> <span class='kw'>false</span><span class='rparen'>)</span>
            <span class='period'>.</span><span class='id identifier rubyid_order'>order</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>RANDOM()</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
            <span class='period'>.</span><span class='id identifier rubyid_limit'>limit</span><span class='lparen'>(</span><span class='int'>5</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_user_difficulty_trivia-instance_method">
  
    #<strong>get_user_difficulty_trivia</strong>  &#x21d2; <tt>Array</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Retrieves the current user, the selected difficulty, and initializes a new trivia object.</p>

<p>This method is responsible for finding the current user from the session, fetching the difficulty level from the request parameters, and creating a new trivia instance with those parameters.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>params</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The request parameters containing the difficulty level.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>session</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The current user’s session for retrieving user data.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>An array containing the user, the difficulty object, and the newly initialized trivia object.</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>User#find</li>
    
      <li>Difficulty#find_by</li>
    
      <li>Trivia#new</li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


44
45
46
47
48
49
50</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controllers/trivia_controller.rb', line 44</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_user_difficulty_trivia'>get_user_difficulty_trivia</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='comma'>,</span> <span class='id identifier rubyid_session'>session</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:user_id</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:user_id</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_difficulty_level'>difficulty_level</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:difficulty</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_difficulty'>difficulty</span> <span class='op'>=</span> <span class='const'>Difficulty</span><span class='period'>.</span><span class='id identifier rubyid_find_by'>find_by</span><span class='lparen'>(</span><span class='label'>level:</span> <span class='id identifier rubyid_difficulty_level'>difficulty_level</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_trivia'>trivia</span> <span class='op'>=</span> <span class='const'>Trivia</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>user:</span> <span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='label'>difficulty:</span> <span class='id identifier rubyid_difficulty'>difficulty</span><span class='rparen'>)</span>
  <span class='lbracket'>[</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_difficulty'>difficulty</span><span class='comma'>,</span> <span class='id identifier rubyid_trivia'>trivia</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="post_trivia-instance_method">
  
    #<strong>post_trivia</strong>  &#x21d2; <tt>Redirect</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Post endpoint that handles the initiation of a standard trivia game.</p>

<p>This endpoint is responsible for setting up a new trivia game with standard questions. It sets up the trivia using provided parameters and session information, and then redirects the user to the first question of the trivia game.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>params</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The parameters from the POST request, including difficulty level.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>session</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The session object to store trivia state.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Redirect</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A redirect to the first question of the new trivia game.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


284
285
286
287</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controllers/trivia_controller.rb', line 284</span>

<span class='id identifier rubyid_post'>post</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/trivia</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_setup_trivia'>setup_trivia</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='comma'>,</span> <span class='id identifier rubyid_session'>session</span><span class='comma'>,</span> <span class='label'>translate:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_redirect'>redirect</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/question/0</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="post_trivia_traduce-instance_method">
  
    #<strong>post_trivia_traduce</strong>  &#x21d2; <tt>Redirect</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Post endpoint that handles the initiation of a translated trivia game.</p>

<p>This endpoint is responsible for setting up a new trivia game with questions translated into the selected language. It sets up the trivia using provided parameters and session information, including the language code for translations, and then redirects the user to the first question of the translated trivia game.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>params</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The parameters from the POST request, including difficulty level and selected language code.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>session</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The session object to store trivia state.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Redirect</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A redirect to the first question of the new translated trivia game.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


300
301
302
303</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controllers/trivia_controller.rb', line 300</span>

<span class='id identifier rubyid_post'>post</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/trivia-traduce</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_setup_trivia'>setup_trivia</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='comma'>,</span> <span class='id identifier rubyid_session'>session</span><span class='comma'>,</span> <span class='label'>translate:</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_redirect'>redirect</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/question-traduce/0</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="random_questions-instance_method">
  
    #<strong>random_questions</strong>  &#x21d2; <tt>ActiveRecord::Relation&lt;Question&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Fetches a random set of questions from the database.</p>

<p>This method selects a random assortment of questions of a particular type and difficulty from the database. It is used to assemble the pool of questions for the trivia game.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>question_count</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The number of questions to retrieve.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>question_type</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The type of questions to retrieve (‘Choice’, ‘True_False’, or ‘Autocomplete’).</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>difficulty</span>
      
      
        <span class='type'>(<tt>Difficulty</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The difficulty level of the questions to retrieve.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>ActiveRecord::Relation&lt;Question&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A collection of question records.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


155
156
157
158
159
160</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controllers/trivia_controller.rb', line 155</span>

<span class='kw'>def</span> <span class='id identifier rubyid_random_questions'>random_questions</span><span class='lparen'>(</span><span class='id identifier rubyid_question_count'>question_count</span><span class='comma'>,</span> <span class='id identifier rubyid_question_type'>question_type</span><span class='comma'>,</span> <span class='id identifier rubyid_difficulty'>difficulty</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_difficulty'>difficulty</span><span class='period'>.</span><span class='id identifier rubyid_questions'>questions</span>
            <span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>type:</span> <span class='id identifier rubyid_question_type'>question_type</span><span class='comma'>,</span> <span class='label'>is_question_translated:</span> <span class='kw'>false</span><span class='rparen'>)</span>
            <span class='period'>.</span><span class='id identifier rubyid_order'>order</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>RANDOM()</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
            <span class='period'>.</span><span class='id identifier rubyid_limit'>limit</span><span class='lparen'>(</span><span class='id identifier rubyid_question_count'>question_count</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="setup_standard_trivia-instance_method">
  
    #<strong>setup_standard_trivia</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Sets up standard trivia questions for the game.</p>

<p>This method adds a set number of random choice, true/false, and autocomplete questions to the trivia based on the difficulty level provided.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>trivia</span>
      
      
        <span class='type'>(<tt>Trivia</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The trivia object to which the questions will be added.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>difficulty</span>
      
      
        <span class='type'>(<tt>Difficulty</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The difficulty object that determines the number and type of questions to add.</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#get_questions_count-instance_method" title="TriviaController#get_questions_count (method)">#get_questions_count</a></span></li>
    
      <li><span class='object_link'><a href="#get_questions-instance_method" title="TriviaController#get_questions (method)">#get_questions</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


63
64
65
66
67</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controllers/trivia_controller.rb', line 63</span>

<span class='kw'>def</span> <span class='id identifier rubyid_setup_standard_trivia'>setup_standard_trivia</span><span class='lparen'>(</span><span class='id identifier rubyid_trivia'>trivia</span><span class='comma'>,</span> <span class='id identifier rubyid_difficulty'>difficulty</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_choice_count'>choice_count</span><span class='comma'>,</span> <span class='id identifier rubyid_true_false_count'>true_false_count</span><span class='comma'>,</span> <span class='id identifier rubyid_autocomplete_count'>autocomplete_count</span> <span class='op'>=</span> <span class='id identifier rubyid_get_questions_count'>get_questions_count</span><span class='lparen'>(</span><span class='id identifier rubyid_difficulty'>difficulty</span><span class='period'>.</span><span class='id identifier rubyid_level'>level</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_questions'>questions</span> <span class='op'>=</span> <span class='id identifier rubyid_get_questions'>get_questions</span><span class='lparen'>(</span><span class='id identifier rubyid_choice_count'>choice_count</span><span class='comma'>,</span> <span class='id identifier rubyid_true_false_count'>true_false_count</span><span class='comma'>,</span> <span class='id identifier rubyid_autocomplete_count'>autocomplete_count</span><span class='comma'>,</span> <span class='id identifier rubyid_difficulty'>difficulty</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_trivia'>trivia</span><span class='period'>.</span><span class='id identifier rubyid_questions'>questions</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span><span class='lparen'>(</span><span class='id identifier rubyid_questions'>questions</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="setup_translated_trivia-instance_method">
  
    #<strong>setup_translated_trivia</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Sets up translated trivia questions for the game.</p>

<p>This method fetches a set of standard questions and then creates translated versions of those questions and answers in the selected language. It then adds these translated questions to the trivia.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>trivia</span>
      
      
        <span class='type'>(<tt>Trivia</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The trivia object to which the translated questions will be added.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>difficulty</span>
      
      
        <span class='type'>(<tt>Difficulty</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The difficulty object that determines which questions to translate.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>selected_language_code</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The language code representing the target language for translation.</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#get_translated_questions-instance_method" title="TriviaController#get_translated_questions (method)">#get_translated_questions</a></span></li>
    
      <li><span class='object_link'><a href="#create_translated_questions_and_answers-instance_method" title="TriviaController#create_translated_questions_and_answers (method)">#create_translated_questions_and_answers</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


81
82
83
84
85
86
87</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controllers/trivia_controller.rb', line 81</span>

<span class='kw'>def</span> <span class='id identifier rubyid_setup_translated_trivia'>setup_translated_trivia</span><span class='lparen'>(</span><span class='id identifier rubyid_trivia'>trivia</span><span class='comma'>,</span> <span class='id identifier rubyid_difficulty'>difficulty</span><span class='comma'>,</span> <span class='id identifier rubyid_selected_language_code'>selected_language_code</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_trivia'>trivia</span><span class='period'>.</span><span class='id identifier rubyid_selected_language_code'>selected_language_code</span> <span class='op'>=</span> <span class='id identifier rubyid_selected_language_code'>selected_language_code</span>
  <span class='id identifier rubyid_choice_and_true_false_questions'>choice_and_true_false_questions</span> <span class='op'>=</span> <span class='id identifier rubyid_get_translated_questions'>get_translated_questions</span><span class='lparen'>(</span><span class='id identifier rubyid_difficulty'>difficulty</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_trivia'>trivia</span><span class='period'>.</span><span class='id identifier rubyid_questions'>questions</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span><span class='lparen'>(</span><span class='id identifier rubyid_choice_and_true_false_questions'>choice_and_true_false_questions</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_translated_questions'>translated_questions</span><span class='comma'>,</span> <span class='id identifier rubyid_translated_answers'>translated_answers</span> <span class='op'>=</span> <span class='id identifier rubyid_create_translated_questions_and_answers'>create_translated_questions_and_answers</span><span class='lparen'>(</span><span class='id identifier rubyid_trivia'>trivia</span><span class='comma'>,</span> <span class='id identifier rubyid_trivia'>trivia</span><span class='period'>.</span><span class='id identifier rubyid_questions'>questions</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_trivia'>trivia</span><span class='period'>.</span><span class='id identifier rubyid_translated_questions'>translated_questions</span> <span class='op'>=</span> <span class='id identifier rubyid_translated_questions'>translated_questions</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="setup_trivia-instance_method">
  
    #<strong>setup_trivia</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Sets up a trivia game with standard or translated questions based on the parameters.</p>

<p>This method orchestrates the creation of a trivia game by calling methods to initialize the trivia object, setting up either standard or translated trivia questions, and then finalizing the trivia setup by saving it and setting up the session.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>params</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The request parameters containing the difficulty level and, if applicable, the selected language code for translations.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>session</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The current user’s session for retrieving user data and storing the trivia session.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>translate</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Flag to determine if the trivia should be set up with translated questions.</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#get_user_difficulty_trivia-instance_method" title="TriviaController#get_user_difficulty_trivia (method)">#get_user_difficulty_trivia</a></span></li>
    
      <li><span class='object_link'><a href="#setup_standard_trivia-instance_method" title="TriviaController#setup_standard_trivia (method)">#setup_standard_trivia</a></span></li>
    
      <li><span class='object_link'><a href="#setup_translated_trivia-instance_method" title="TriviaController#setup_translated_trivia (method)">#setup_translated_trivia</a></span></li>
    
      <li><span class='object_link'><a href="#finalize_trivia_setup-instance_method" title="TriviaController#finalize_trivia_setup (method)">#finalize_trivia_setup</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


22
23
24
25
26
27
28
29
30</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controllers/trivia_controller.rb', line 22</span>

<span class='kw'>def</span> <span class='id identifier rubyid_setup_trivia'>setup_trivia</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='comma'>,</span> <span class='id identifier rubyid_session'>session</span><span class='comma'>,</span> <span class='label'>translate:</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_difficulty'>difficulty</span><span class='comma'>,</span> <span class='id identifier rubyid_trivia'>trivia</span> <span class='op'>=</span> <span class='id identifier rubyid_get_user_difficulty_trivia'>get_user_difficulty_trivia</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='comma'>,</span> <span class='id identifier rubyid_session'>session</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_translate'>translate</span>
    <span class='id identifier rubyid_setup_translated_trivia'>setup_translated_trivia</span><span class='lparen'>(</span><span class='id identifier rubyid_trivia'>trivia</span><span class='comma'>,</span> <span class='id identifier rubyid_difficulty'>difficulty</span><span class='comma'>,</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:selectedLanguageCode</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_setup_standard_trivia'>setup_standard_trivia</span><span class='lparen'>(</span><span class='id identifier rubyid_trivia'>trivia</span><span class='comma'>,</span> <span class='id identifier rubyid_difficulty'>difficulty</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_finalize_trivia_setup'>finalize_trivia_setup</span><span class='lparen'>(</span><span class='id identifier rubyid_trivia'>trivia</span><span class='comma'>,</span> <span class='id identifier rubyid_session'>session</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="translate_to_selected_language-instance_method">
  
    #<strong>translate_to_selected_language</strong>(text, target_language)  &#x21d2; <tt>String</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Translates a given text to the selected language.</p>

<p>This method sends a POST request to a translation API with the text to be translated and the target language. It then parses the JSON response and returns the translated text. If there is an error with the request or parsing the response, it outputs an error message and returns nil.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>text</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The text to be translated.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>target_language</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The language to translate the text into.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The translated text if successful, or nil if there was an error.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>StandardError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If there is an error with the request or parsing the response, it outputs an error message and returns nil.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controllers/trivia_controller.rb', line 240</span>

<span class='kw'>def</span> <span class='id identifier rubyid_translate_to_selected_language'>translate_to_selected_language</span><span class='lparen'>(</span><span class='id identifier rubyid_text'>text</span><span class='comma'>,</span> <span class='id identifier rubyid_target_language'>target_language</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_url'>url</span> <span class='op'>=</span> <span class='const'>URI</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>https://text-translator2.p.rapidapi.com/translate</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

  <span class='id identifier rubyid_http'>http</span> <span class='op'>=</span> <span class='const'>Net</span><span class='op'>::</span><span class='const'>HTTP</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_url'>url</span><span class='period'>.</span><span class='id identifier rubyid_host'>host</span><span class='comma'>,</span> <span class='id identifier rubyid_url'>url</span><span class='period'>.</span><span class='id identifier rubyid_port'>port</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_http'>http</span><span class='period'>.</span><span class='id identifier rubyid_use_ssl'>use_ssl</span> <span class='op'>=</span> <span class='kw'>true</span>

  <span class='id identifier rubyid_request'>request</span> <span class='op'>=</span> <span class='const'>Net</span><span class='op'>::</span><span class='const'>HTTP</span><span class='op'>::</span><span class='const'>Post</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_url'>url</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_request'>request</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>content-type</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>application/x-www-form-urlencoded</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_request'>request</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>X-RapidAPI-Key</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>ENV</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>TEXT_TRANSLATOR_KEY</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_request'>request</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>X-RapidAPI-Host</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>text-translator2.p.rapidapi.com</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='const'>URI</span><span class='period'>.</span><span class='id identifier rubyid_encode_www_form'>encode_www_form</span><span class='lparen'>(</span>
    <span class='label'>source_language:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>es</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
    <span class='label'>target_language:</span> <span class='id identifier rubyid_target_language'>target_language</span><span class='comma'>,</span>
    <span class='label'>text:</span> <span class='id identifier rubyid_text'>text</span>
  <span class='rparen'>)</span>
  <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span> <span class='op'>=</span> <span class='id identifier rubyid_query'>query</span>
  <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_http'>http</span><span class='period'>.</span><span class='id identifier rubyid_request'>request</span><span class='lparen'>(</span><span class='id identifier rubyid_request'>request</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_code'>code</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>200</span><span class='tstring_end'>&#39;</span></span>
    <span class='comment'># Parsea la respuesta JSON
</span>    <span class='id identifier rubyid_response_data'>response_data</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span><span class='rparen'>)</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_response_data'>response_data</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>data</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_response_data'>response_data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>translatedText</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_response_data'>response_data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>translatedText</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Error: No se encontró &#39;translatedText&#39; en la respuesta.</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>return</span> <span class='kw'>nil</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Error al traducir: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>return</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sun Nov  5 18:14:13 2023 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.34 (ruby-2.7.5).
</div>

    </div>
  </body>
</html>